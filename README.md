# TUS_YUURIKAI_SYSTEM 📦🔑

## 概要 ✨
TUS_YUURIKAI_SYSTEM は、システム認証を活用して安全にロッカーを借りることができるシステムです。  
シンプルな操作で利用者も管理者もストレスなく利用できるよう設計されています！ 🚀🔒

---
## Install 方法

### 1. Dockerイメージのビルド

プロジェクトのルートディレクトリにある `Dockerfile` を利用して、Dockerイメージをビルドします。

```sh
docker build -t tus_yuurikai_system .
```

### 2. Dockerコンテナの起動

ビルドしたイメージを用いて、Dockerコンテナを起動します。例として、ホストのポート 8000 をコンテナの同一ポートにマッピングする場合は以下のように実行します。

```sh
docker run -p 8000:8000 tus_yuurikai_system
```
※ ポート番号は必要に応じて変更してください。

### 3. run.sh の実行

その後、run.sh を実行します。
このスクリプトは以下の処理を行います。

    frontend ディレクトリに移動してフロントエンドのビルド (npm run build) を実行
    ルートディレクトリに戻り、バックエンドを起動 (cargo run)
    
---


## ユーザのシステムの流れ 👤

1. **ロッカー空き検索** 🔍  
   - 「ロッカー空き検索」をクリックして、利用可能なロッカーを確認します。

2. **利用規約の確認** 📄  
   - 規約をしっかりと読み、「同意して次に進む」をクリックします。  
   - **必ず最後まで読んでください！** 「利用規約とプライバシーポリシーに同意します。」のチェックをお忘れなく ✅

3. **申請情報の入力** 📝  
   - **申請者**と**共同利用者**の**学籍番号**および**氏名**を正確に入力します。  
   - 特に学籍番号が正しいかどうか、十分に確認してください（指定した学籍番号に認証メールが届きます 📧）。

4. **入力内容の確認** 🔍  
   - 入力内容をよくチェックし、誤りがないか確認しましょう！

5. **次のステップへ** ➡️  
   - 「今後のステップを確認する」ボタンをクリックし、次の手順に進みます。

6. **メール認証** ✉️  
   - 各自の Outlook に移動し、申請者は送られてきたメール内の URL をクリックします。  
   - 認証に少し時間がかかる可能性があるので、しばらくお待ちください ⏳。  
   - 共同利用者もそれぞれメールの URL をクリックしてください。  
   - ※申請者は、共同利用者に認証メールが届いているかも必ず確認してください 👀。

7. **認証完了 & ロッカー指定** 🔑  
   - 申請者宛に認証完了メールが届いたら、使いたいロッカー番号を指定します。  
   - ※利用できるのは「空き」の状態のロッカーのみです！ 🚪

8. **最終確認と登録** ✅  
   - 指定したロッカー番号をもう一度確認し、情報が正しいことを確かめます。  
   - 「確認して登録」ボタンをクリックし、登録が完了します 🎉。

---

## 管理者のシステムの流れ 🛠️

1. **ログイン** 🔐  
   - ブラウザで `[ドメイン]/login` にアクセスし、ユーザ名とパスワードを入力します。  
   - 初めての利用の場合は、事前に管理者からユーザ名とパスワードをご確認ください 📋。

2. **ロッカー設定** ⚙️  
   - ログイン後、メニューから「ロッカー設定」を選択します。

3. **作業の選択** 🛠️  
   - 実施したい作業を選びます：  
     - **ロッカー利用者検索** 🔍  
     - **ロッカーリセット** 🔄

4. **検索・リセットの操作** 🖥️  
   - **ロッカー利用者検索の場合:**  
     希望する年度（必須）、姓、名、階数を入力して検索を行います。  
   - **ロッカーリセットの場合:**  
     リセットボタンを押し、消去用パスワードを入力して、ロッカーの状態を「空き」に強制的にリセットします。  
     - ※ロッカーが実際に使用されていない場合のみ操作してください。  
     - 管理者の許可を得た上で、消去用パスワードを受け取ってから実施します 🔑。

---

## 注意事項 ⚠️

- ユーザは、必ず正確な学籍番号と氏名を入力してください。  
  誤った情報では認証メールが届かない恐れがあります 📧❌。
- ロッカーリセットの操作は管理者の承認が必要です。  
  不正な操作やタイミングの誤りにご注意ください 🔒🚫。
- 利用規約とプライバシーポリシーは必ずご確認の上、同意してください。  
  同意しない場合は次のステップへ進むことができません 📜✅。

---

## 技術スタック

**バックエンド**  
- **言語:** Rust  
- **フレームワーク:** Rocket  
- **ORM:** Diesel (PostgreSQL)  
- **シリアライズ:** serde, serde_json  
- **APIドキュメント:** utoipa, utoipa-swagger-ui  
- **その他:** dotenv, chrono, uuid, lettre, jsonwebtoken, rocket_cors, reqwest, regex

**フロントエンド**  
- **言語:** TypeScript  
- **ライブラリ:** React, Ant Design  
- **状態管理/通信:** TanStack React Query, axios  
- **ルーティング:** react-router-dom  

**インフラ**  
- **コンテナ:** Docker (Dockerfile によりコンテナ化)

---


## お問い合わせ 📬

バグ報告、機能リクエスト等がございましたら、  
[Issue](https://github.com/Lit-innosence/tus_yuurikai_system/issues) にてご連絡ください。  

---

TUS_YUURIKAI_SYSTEM をご利用いただき、安全かつ快適にロッカーを管理しましょう！ 🎉🔑🚀
